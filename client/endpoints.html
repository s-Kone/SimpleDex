<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SimpleDex API search & team</title>
</head>
<body>
    <div>
    <p>search a pokemon by their name and returns the pokemon info in json (only charizard works rn)</p>
    <input type="text" placeholder="enter pokemon name here" id="pokemon">
    <input type="button" value="submit" onclick="getPokemon()">
    <p id="searchResult"></p>
    </div>
    <div>
        <p>view your team </p>
        <input type="text" placeholder="team ID" id="teamID">
        <input type="text" placeholder="pokemon ID" id="pokemonID">
        <input type="button" value="submit" onclick="getTeam()">
        <p id="getTeamResult"></p>
        </div>

    <div>
        <p>save your team to view later -> this is for later</p>
        <input type="text" placeholder="team name" id="teamName">
        <input type="text" placeholder="enter pokemon 1 here" id="pokemon1">
        <input type="text" placeholder="enter pokemon 2 here" id="pokemon2">
        <input type="text" placeholder="enter pokemon 3 here" id="pokemon3">
        <input type="text" placeholder="enter pokemon 4 here" id="pokemon4">
        <input type="text" placeholder="enter pokemon 5 here" id="pokemon5">
        <input type="button" value="submit" onclick="postTeam()">
        <p id="postResult"></p>
        </div>

    <script>
        const xhttp = new XMLHttpRequest();
        const endPointRoot = "https://alexgiasson.me/comp4537/termproject/api/v1/";

        function getPokemon() {
            let p = document.getElementById("pokemon").value;
            let params = 'searchPokemon/?pokemon=' + p;
            let url = endPointRoot + params;
            xhttp.open("GET", url, true);
            xhttp.send(url);
            console.log(url);
            xhttp.onreadystatechange = function () {
                if (this.readyState === 4 && this.status === 200) {
                    document.getElementById("searchResult").innerHTML  = this.responseText;
                    
                }
            }
        }

        // function postTeam() {
        //     let tn = document.getElementById("teamName").value;
        //     let t1 = document.getElementById("pokemon1").value;
        //     let t2 = document.getElementById("pokemon2").value;
        //     let t3 = document.getElementById("pokemon3").value;
        //     let t4 = document.getElementById("pokemon4").value;
        //     let t5 = document.getElementById("pokemon5").value;
        //     let params = 'postTeam/?teamname=' + tn + '&pokemon1=' + t1 + '&pokemon2=' + t2 + '&pokemon3=' + t3 + '&pokemon4=' + t4 + '&pokemon5=' + t5;
        //     let url = endPointRoot + params;
        //     console.log(url);
        //     let obj = {teamname: tn, pokemon1: t1, pokemon2: t2, pokemon3: t3, pokemon4: t4, pokemon5: t5}
        //     let data = JSON.stringify(obj);
        //     xhttp.open("POST", url, true);
        //     xhttp.setRequestHeader("Content-type", "application/x-www-form-urlencoded");
        //     xhttp.send(data);
        //     xhttp.onreadystatechange = function () {
        //         if (this.readyState === 4 && this.status === 200) {
        //             console.log(this.responseText);
        //         }
        //     }
        // }

        function getTeam() {
            let TID = document.getElementById("teamID").value;
            let PID = document.getElementById("pokemonID").value;
            let params = 'postTeam/?teamID=' + TID + '&pokemonID=' + PID;
            let url = endPointRoot + params;
            xhttp.open("GET", url, true);
            xhttp.send(url);
            console.log(url);
            xhttp.onreadystatechange = function () {
                if (this.readyState === 4 && this.status === 200) {
                    document.getElementById("getTeamResult").innerHTML  = this.responseText;
                }
            }
        }



    </script>
</body>
</html>